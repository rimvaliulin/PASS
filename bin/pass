#!/usr/bin/env python


def main():
    from Pass import Pass, get_version
    import optparse

    p = optparse.OptionParser(prog='pass',
                              version=get_version(),
                              usage='usage: %prog [options] filename',
                              description='Compiles .pass files to .css')

    p.add_option('-i', '--inherit',
                 action='store_true',
                 help='use selector inheritance, rather then property duplication',
                 dest='inherit_selectors',
                 default=True)

    p.add_option('-c', '--compressed',
                 action='store_true',
                 help='compress imported .css files',
                 dest='compressed',
                 default=True)

    p.add_option('-e', '--empty-selectors',
                 action='store_true',
                 help='keep empty selectors',
                 dest='empty_selectors',
                 default=True)

    p.add_option('-r', '--respect-indents',
                 action='store_true',
                 help='respect indentes',
                 dest='respect_indents',
                 default=True)

    p.add_option('-n', '--newlines',
                 action='store_true',
                 help='use newlines',
                 dest='newlines',
                 default=True)

    p.add_option('-I', '--indent',
                 action='store',
                 type='string',
                 help='.pass file indentation. default 2 breaks',
                 dest='indent',
                 default='  ')

    p.add_option('-C', '--css-indent',
                 action='store',
                 type='string',
                 help='.css file indentation. default 4 breaks',
                 dest='css_indent',
                 default='    ')

    o, args = p.parse_args()

    try:
        filename = args[0]
    except IndexError:
        p.print_usage()
    else:
        Pass(filename, compressed=o.compressed, empty_selectors=o.empty_selectors, respect_indents=o.respect_indents,
             inherit_selectors=o.inherit_selectors, newlines=o.newlines, indent=o.indent, css_indent=o.css_indent)

if __name__ == '__main__':
    main()
